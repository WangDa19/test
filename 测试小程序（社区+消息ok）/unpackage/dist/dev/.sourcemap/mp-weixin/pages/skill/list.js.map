{"version":3,"sources":["uni-app:///main.js","webpack:///H:/测试小程序/pages/skill/list.vue?d784","webpack:///H:/测试小程序/pages/skill/list.vue?6d00","webpack:///H:/测试小程序/pages/skill/list.vue?29e0","webpack:///H:/测试小程序/pages/skill/list.vue?78b9","uni-app:///pages/skill/list.vue","webpack:///H:/测试小程序/pages/skill/list.vue?bf39","webpack:///H:/测试小程序/pages/skill/list.vue?7b58"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","currentSchool","searchKeyword","tabs","name","value","activeTab","skillList","pagination","page","pageSize","total","totalPage","refreshing","loading","hasAuth","emptyText","currentUserId","isAccepting","onShow","methods","checkAuth","userId","userInfo","console","loadContentList","reset","uniCloud","collection","category","keyword","res","uni","title","icon","switchTab","onSearch","onRefresh","loadMore","navigateToDetail","url","chatWithTeacher","bookLesson","startChat","position","acceptOrder","content","success","submitAcceptOrder","taskId","setTimeout","computed","leftList","rightList"],"mappings":"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","file":"pages/skill/list.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/skill/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=4e3f0cd5&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/skill/list.vue\"\nexport default component.exports","export * from \"-!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=template&id=4e3f0cd5&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.skillList.length\n  var l0 = !(g0 === 0)\n    ? _vm.__map(_vm.leftList, function (item, __i0__) {\n        var $orig = _vm.__get_orig(item)\n        var g1 = item.tags && item.tags.length\n        return {\n          $orig: $orig,\n          g1: g1,\n        }\n      })\n    : null\n  var l1 = !(g0 === 0)\n    ? _vm.__map(_vm.rightList, function (item, __i1__) {\n        var $orig = _vm.__get_orig(item)\n        var g2 = item.tags && item.tags.length\n        return {\n          $orig: $orig,\n          g2: g2,\n        }\n      })\n    : null\n  var g3 = _vm.skillList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        l1: l1,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <!-- 顶部搜索和定位 -->\n    <view class=\"header\">\n      <view class=\"search-wrapper\">\n        <view class=\"search-bar\">\n          <view class=\"location-mini\">\n            <image src=\"/static/images/local.png\" mode=\"aspectFit\" class=\"location-icon\"/>\n            <text>{{currentSchool || '请认证'}}</text>\n          </view>\n          <view class=\"search-input\">\n            <uni-icons type=\"search\" size=\"16\" color=\"#666\"/>\n            <input \n              type=\"text\" \n              placeholder=\"搜索技能名称、类型等\" \n              v-model=\"searchKeyword\"\n              @confirm=\"onSearch\"\n            />\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 分类标签 -->\n    <scroll-view scroll-x class=\"category-scroll\" show-scrollbar=\"false\">\n      <view class=\"category-list\">\n        <view \n          v-for=\"(tab, index) in tabs\" \n          :key=\"index\"\n          :class=\"['category-item', activeTab === index ? 'active' : '']\"\n          @tap=\"switchTab(index)\"\n        >\n          <text>{{tab.name}}</text>\n        </view>\n      </view>\n    </scroll-view>\n\n    <!-- 瀑布流列表 -->\n    <scroll-view \n      scroll-y \n      class=\"skill-list\"\n      @scrolltolower=\"loadMore\"\n      refresher-enabled\n      :refresher-triggered=\"refreshing\"\n      @refresherrefresh=\"onRefresh\"\n    >\n      <!-- 空状态 -->\n      <view v-if=\"skillList.length === 0\" class=\"empty-state\">\n        <image src=\"/static/images/empty.png\" mode=\"aspectFit\"></image>\n        <text>{{emptyText}}</text>\n      </view>\n\n      <!-- 瀑布流布局 -->\n      <view v-else class=\"waterfall\">\n        <view class=\"waterfall-left\">\n          <view \n            v-for=\"item in leftList\" \n            :key=\"item._id\"\n            class=\"skill-card\"\n            @tap=\"navigateToDetail(item._id)\"\n          >\n            <image \n              class=\"skill-image\" \n              :src=\"item.images[0] || '/static/images/content/default.jpg'\" \n              mode=\"widthFix\"\n            />\n            <view class=\"skill-content\">\n              <view class=\"skill-header\">\n                <text class=\"title\">{{item.title}}</text>\n                <text class=\"level\">{{item.level || '暂无等级'}}</text>\n              </view>\n              <text class=\"desc\">{{item.content}}</text>\n              <view class=\"tags\" v-if=\"item.tags && item.tags.length\">\n                <text v-for=\"(tag, index) in item.tags\" :key=\"index\" class=\"tag\">{{tag}}</text>\n              </view>\n              <view class=\"skill-footer\">\n                <view class=\"user-info\">\n                  <image class=\"avatar\" :src=\"item.userInfo.avatar || '/static/images/avatar/default.png'\" mode=\"aspectFill\"/>\n                  <text class=\"nickname\">{{item.userInfo.nickname || '未知用户'}}</text>\n                </view>\n                <view class=\"price-row\">\n                  <text class=\"price\">¥{{item.price}}</text>\n                  <view class=\"button-group\">\n                    <button class=\"action-btn chat-btn\" @tap.stop=\"startChat(item)\">私聊</button>\n                    <button class=\"action-btn accept-btn\" @tap.stop=\"acceptOrder(item)\">接单</button>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <view class=\"waterfall-right\">\n          <view \n            v-for=\"item in rightList\" \n            :key=\"item._id\"\n            class=\"skill-card\"\n            @tap=\"navigateToDetail(item._id)\"\n          >\n            <image \n              class=\"skill-image\" \n              :src=\"item.images[0] || '/static/images/content/default.jpg'\" \n              mode=\"widthFix\"\n            />\n            <view class=\"skill-content\">\n              <view class=\"skill-header\">\n                <text class=\"title\">{{item.title}}</text>\n                <text class=\"level\">{{item.level || '暂无等级'}}</text>\n              </view>\n              <text class=\"desc\">{{item.content}}</text>\n              <view class=\"tags\" v-if=\"item.tags && item.tags.length\">\n                <text v-for=\"(tag, index) in item.tags\" :key=\"index\" class=\"tag\">{{tag}}</text>\n              </view>\n              <view class=\"skill-footer\">\n                <view class=\"user-info\">\n                  <image class=\"avatar\" :src=\"item.userInfo.avatar || '/static/images/avatar/default.png'\" mode=\"aspectFill\"/>\n                  <text class=\"nickname\">{{item.userInfo.nickname || '未知用户'}}</text>\n                </view>\n                <view class=\"price-row\">\n                  <text class=\"price\">¥{{item.price}}</text>\n                  <view class=\"button-group\">\n                    <button class=\"action-btn chat-btn\" @tap.stop=\"startChat(item)\">私聊</button>\n                    <button class=\"action-btn accept-btn\" @tap.stop=\"acceptOrder(item)\">接单</button>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 加载状态 -->\n      <view class=\"loading-state\" v-if=\"skillList.length > 0\">\n        <text v-if=\"loading\">加载中...</text>\n        <text v-else-if=\"pagination.page >= pagination.totalPage\">没有更多了</text>\n        <text v-else>上拉加载更多</text>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      currentSchool: '',\n      searchKeyword: '',\n      tabs: [\n        { name: '全部', value: '' },\n        { name: '编程开发', value: 'programming' },\n        { name: '设计创作', value: 'design' },\n        { name: '语言培训', value: 'language' },\n        { name: '学科辅导', value: 'subject' }\n      ],\n      activeTab: 0,\n      skillList: [],\n      pagination: {\n        page: 1,\n        pageSize: 10,\n        total: 0,\n        totalPage: 1\n      },\n      refreshing: false,\n      loading: false,\n      hasAuth: false,\n      emptyText: '暂无内容',\n      currentUserId: '',\n      isAccepting: false\n    }\n  },\n  onShow() {\n    this.checkAuth();\n    this.currentUserId = uni.getStorageSync('userId');\n  },\n  methods: {\n    // 检查认证状态\n    async checkAuth() {\n      try {\n        const userId = uni.getStorageSync('userId');\n        if (!userId) {\n          this.emptyText = '请先登录';\n          this.hasAuth = false;\n          return;\n        }\n\n        const userInfo = uni.getStorageSync('userInfo');\n        if (userInfo?.educationInfo?.verified) {\n          this.hasAuth = true;\n          this.currentSchool = userInfo.educationInfo.schoolName;\n          this.loadContentList(true);\n        } else {\n          this.hasAuth = false;\n          this.emptyText = '请先完成位置认证';\n        }\n      } catch (error) {\n        console.error('检查认证状态失败:', error);\n      }\n    },\n\n    // 加载内容列表\n    async loadContentList(reset = false) {\n      if (reset) {\n        this.pagination.page = 1;\n        this.skillList = [];\n      }\n\n      if (this.loading || !this.hasAuth) return;\n\n      this.loading = true;\n      try {\n        const res = await uniCloud.callFunction({\n          name: 'getContentList',\n          data: {\n            collection: 'skills',\n            category: this.tabs[this.activeTab].value,\n            keyword: this.searchKeyword,\n            userId: uni.getStorageSync('userId'),\n            page: this.pagination.page,\n            pageSize: this.pagination.pageSize\n          }\n        });\n\n        if (res.result.code === 0) {\n          const { list, pagination } = res.result.data;\n          \n          if (reset) {\n            this.skillList = list;\n          } else {\n            this.skillList = [...this.skillList, ...list];\n          }\n          this.pagination = pagination;\n        }\n      } catch (error) {\n        console.error('获取内容列表失败:', error);\n        uni.showToast({\n          title: error.message || '获取数据失败',\n          icon: 'none'\n        });\n      } finally {\n        this.loading = false;\n        this.refreshing = false;\n      }\n    },\n\n    // 切换分类\n    switchTab(index) {\n      if (this.activeTab === index) return;\n      this.activeTab = index;\n      this.loadContentList(true);\n    },\n\n    // 搜索\n    onSearch() {\n      if (!this.searchKeyword.trim()) return;\n      this.loadContentList(true);\n    },\n\n    // 下拉刷新\n    async onRefresh() {\n      this.refreshing = true;\n      await this.loadContentList(true);\n    },\n\n    // 加载更多\n    loadMore() {\n      if (this.pagination.page >= this.pagination.totalPage) return;\n      this.pagination.page++;\n      this.loadContentList();\n    },\n\n    // 跳转到详情页\n    navigateToDetail(id) {\n      uni.navigateTo({\n        url: `/pages/skill/detail?id=${id}`\n      });\n    },\n\n    // 私聊\n    chatWithTeacher(item) {\n      if (!this.hasAuth) {\n        uni.showToast({\n          title: '请先登录',\n          icon: 'none'\n        });\n        return;\n      }\n\n      uni.navigateTo({\n        url: `/pages/chat/chat?targetUserId=${item.userId}&targetUserName=${encodeURIComponent(item.userInfo.nickname)}`\n      });\n    },\n\n    // 预约课程\n    bookLesson(item) {\n      if (!this.hasAuth) {\n        uni.showToast({\n          title: '请先登录',\n          icon: 'none'\n        });\n        return;\n      }\n\n      uni.navigateTo({\n        url: `/pages/skill/booking?id=${item._id}`\n      });\n    },\n\n    // 开始私聊\n    startChat(item) {\n      if (!this.hasAuth) {\n        uni.showToast({\n          title: '请先登录',\n          icon: 'none',\n          position: 'center'\n        });\n        return;\n      }\n      \n      // 检查是否给自己发消息\n      if (this.currentUserId === item.userId) {\n        uni.showToast({\n          title: '不能给自己发送消息',\n          icon: 'none',\n          position: 'center'\n        });\n        return;\n      }\n      \n      // 跳转到聊天页面\n      uni.navigateTo({\n        url: `/pages/chat/chat?targetUserId=${item.userId}&targetUserName=${encodeURIComponent(item.userInfo.nickname)}`\n      });\n    },\n\n    // 修改接单方法\n    acceptOrder(item) {\n      if (!this.hasAuth) {\n        uni.showToast({\n          title: '请先登录',\n          icon: 'none',\n          position: 'center'\n        });\n        return;\n      }\n      \n      // 检查是否接自己的单\n      if (this.currentUserId === item.userId) {\n        uni.showToast({\n          title: '不能接自己发布的单',\n          icon: 'none',\n          position: 'center'\n        });\n        return;\n      }\n      \n      uni.showModal({\n        title: '确认接单',\n        content: `确定接受\"${item.title}\"这个任务吗？`,\n        success: (res) => {\n          if (res.confirm) {\n            this.submitAcceptOrder(item);\n          }\n        }\n      });\n    },\n\n    // 添加提交接单方法\n    async submitAcceptOrder(item) {\n      try {\n        if (this.isAccepting) return;\n        this.isAccepting = true;\n        \n        const userId = uni.getStorageSync('userId');\n        if (!userId) {\n          uni.showToast({\n            title: '请先登录',\n            icon: 'none'\n          });\n          this.isAccepting = false;\n          return;\n        }\n\n        console.log('开始接单，任务ID:', item._id, '用户ID:', userId);\n\n        const res = await uniCloud.callFunction({\n          name: 'acceptSkill',\n          data: {\n            taskId: item._id,\n            userId: userId\n          }\n        });\n\n        console.log('接单结果:', res.result);\n\n        if (res.result.code === 0) {\n          uni.showToast({\n            title: '接单成功',\n            icon: 'success'\n          });\n          \n          // 从列表中移除已接单的任务\n          this.skillList = this.skillList.filter(t => t._id !== item._id);\n          \n          // 延迟刷新以便用户看到确认消息\n          setTimeout(() => {\n            this.loadContentList(true);\n          }, 1000);\n        } else {\n          throw new Error(res.result.msg);\n        }\n      } catch (error) {\n        console.error('接单失败:', error);\n        uni.showToast({\n          title: error.message || '接单失败',\n          icon: 'none'\n        });\n      } finally {\n        this.isAccepting = false;\n      }\n    }\n  },\n  computed: {\n    // 左侧列表\n    leftList() {\n      return this.skillList.filter((_, index) => index % 2 === 0);\n    },\n    // 右侧列表\n    rightList() {\n      return this.skillList.filter((_, index) => index % 2 === 1);\n    }\n  }\n}\n</script>\n\n<style>\n.container {\n  min-height: 100vh;\n  background-color: #f8f8f8;\n}\n\n.header {\n  background-color: #fff;\n  padding: 20rpx;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 100;\n}\n\n.search-wrapper {\n  display: flex;\n  align-items: center;\n}\n\n.search-bar {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  background: #f5f5f5;\n  border-radius: 30rpx;\n  padding: 10rpx 20rpx;\n}\n\n.location-mini {\n  display: flex;\n  align-items: center;\n  padding-right: 20rpx;\n  border-right: 1px solid #ddd;\n}\n\n.location-icon {\n  width: 32rpx;\n  height: 32rpx;\n  margin-right: 10rpx;\n}\n\n.search-input {\n  flex: 1;\n  margin-left: 20rpx;\n  display: flex;\n  align-items: center;\n}\n\n.search-input input {\n  flex: 1;\n  font-size: 28rpx;\n  margin-left: 10rpx;\n}\n\n.category-scroll {\n  position: fixed;\n  top: 100rpx;\n  left: 0;\n  right: 0;\n  background: #fff;\n  z-index: 99;\n  padding: 20rpx 0;\n  white-space: nowrap;\n}\n\n.category-list {\n  padding: 0 20rpx;\n  display: flex;\n}\n\n.category-item {\n  padding: 10rpx 30rpx;\n  margin-right: 20rpx;\n  background: #f5f5f5;\n  border-radius: 30rpx;\n  font-size: 28rpx;\n  color: #666;\n}\n\n.category-item.active {\n  background: #ff5757;\n  color: #fff;\n}\n\n.skill-list {\n  margin-top: 180rpx;\n  padding: 20rpx;\n  height: calc(100vh - 180rpx);\n}\n\n.waterfall {\n  display: flex;\n  gap: 20rpx;\n  padding: 20rpx;\n}\n\n.waterfall-left,\n.waterfall-right {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.skill-card {\n  background: #fff;\n  border-radius: 12rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n}\n\n.skill-image {\n  width: 100%;\n  height: auto;\n  background-color: #f5f5f5;\n}\n\n.skill-content {\n  padding: 16rpx;\n}\n\n.skill-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12rpx;\n}\n\n.title {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #333;\n  flex: 1;\n  margin-right: 12rpx;\n}\n\n.level {\n  font-size: 22rpx;\n  color: #ff5757;\n  background: #fff5f5;\n  padding: 4rpx 12rpx;\n  border-radius: 20rpx;\n  white-space: nowrap;\n}\n\n.desc {\n  font-size: 26rpx;\n  color: #666;\n  margin-bottom: 12rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n\n.tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8rpx;\n  margin-bottom: 12rpx;\n}\n\n.tag {\n  font-size: 22rpx;\n  color: #666;\n  background: #f5f5f5;\n  padding: 4rpx 12rpx;\n  border-radius: 16rpx;\n}\n\n.skill-footer {\n  border-top: 1rpx solid #f5f5f5;\n  padding-top: 12rpx;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  margin-bottom: 12rpx;\n}\n\n.avatar {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n  margin-right: 8rpx;\n}\n\n.nickname {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.price-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.price {\n  font-size: 30rpx;\n  color: #ff5757;\n  font-weight: bold;\n}\n\n.button-group {\n  display: flex;\n  gap: 12rpx;\n}\n\n.action-btn {\n  font-size: 24rpx;\n  padding: 8rpx 20rpx;\n  border-radius: 24rpx;\n  border: none;\n  line-height: 1.2;\n}\n\n.accept-btn {\n  background: #ff5757;\n  color: #fff;\n}\n\n.chat-btn {\n  background: #fff;\n  color: #ff5757;\n  border: 1rpx solid #ff5757;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 100rpx 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n}\n\n.empty-state image {\n  width: 200rpx;\n  height: 200rpx;\n  margin-bottom: 20rpx;\n}\n\n.empty-state text {\n  font-size: 28rpx;\n  color: #999;\n  display: block;\n  text-align: center;\n}\n\n.loading-state {\n  text-align: center;\n  padding: 20rpx;\n  color: #999;\n  font-size: 26rpx;\n}\n</style> ","import mod from \"-!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Hbuilderx\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1743160579683\n      var cssReload = require(\"D:/Hbuilderx/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}