<view class="container"><view class="category-nav"><scroll-view class="nav-scroll" scroll-x="{{true}}" scroll-into-view="{{'category-'+currentCategory}}"><block wx:for="{{categories}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['category-item',(currentCategory===index)?'active':'']}}" id="{{'category-'+index}}" data-event-opts="{{[['tap',[['switchCategory',[index]]]]]}}" bindtap="__e"><text class="category-text">{{item.name}}</text></view></block></scroll-view></view><view class="publish-form"><block wx:if="{{currentCategory===7}}"><block><view class="form-item"><textarea class="content-input" placeholder="分享新鲜事..." maxlength="500" data-event-opts="{{[['input',[['__set_model',['$0','postContent','$event',[]],['formData']]]]]}}" value="{{formData.postContent}}" bindinput="__e"></textarea><text class="word-count">{{$root.g0+"/500"}}</text></view><view class="form-item"><view class="image-upload"><view class="image-list"><block wx:for="{{formData.postImages}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="image-item"><image class="preview-image" src="{{item}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',[index,'post']]]]]}}" bindtap="__e"></image><text data-event-opts="{{[['tap',[['removeImage',[index,'post']]]]]}}" class="delete-icon" catchtap="__e">×</text></view></block><block wx:if="{{$root.g1<9}}"><view data-event-opts="{{[['tap',[['chooseImage',['post']]]]]}}" class="upload-btn" bindtap="__e"><text class="plus-icon">+</text><text class="upload-text">添加图片</text></view></block></view></view></view></block></block><block wx:else><block><view class="form-item"><input class="title-input" placeholder="请输入标题（必填）" maxlength="30" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['formData']]]]]}}" value="{{formData.title}}" bindinput="__e"/><text class="word-count">{{$root.g2+"/30"}}</text></view><view class="form-item"><textarea class="content-input" placeholder="请详细描述您要发布的内容（必填）" maxlength="500" data-event-opts="{{[['input',[['__set_model',['$0','content','$event',[]],['formData']]]]]}}" value="{{formData.content}}" bindinput="__e"></textarea><text class="word-count">{{$root.g3+"/500"}}</text></view><block wx:if="{{currentCategory!==4}}"><view class="form-item"><view class="image-upload"><view class="image-list"><block wx:for="{{formData.tempImages}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="image-item"><image class="preview-image" src="{{item}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',[index]]]]]}}" bindtap="__e"></image><text data-event-opts="{{[['tap',[['removeImage',[index]]]]]}}" class="delete-icon" catchtap="__e">×</text></view></block><block wx:if="{{$root.g4<9}}"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-btn" bindtap="__e"><text class="plus-icon">+</text><text class="upload-text">添加图片</text></view></block></view></view></view></block><block wx:if="{{currentCategory===0}}"><block><view class="form-item"><text class="label">每小时价格：</text><view class="price-input"><text>¥</text><input type="digit" placeholder="请输入每小时价格" data-event-opts="{{[['input',[['__set_model',['$0','price','$event',[]],['formData']]]]]}}" value="{{formData.price}}" bindinput="__e"/><text class="unit">元/小时</text></view></view><view class="form-item"><text class="label">技能等级：</text><picker mode="selector" range="{{['初级','中级','高级','专家']}}" data-event-opts="{{[['change',[['e0',['$event']]]]]}}" bindchange="__e"><view class="picker-content">{{''+(formData.level||'请选择技能等级')+''}}</view></picker></view><view class="form-item"><text class="label">授课方式：</text><checkbox-group data-event-opts="{{[['change',[['handleTeachingMethodChange',['$event']]]]]}}" bindchange="__e"><label class="checkbox-item"><checkbox value="online"></checkbox>线上授课</label><label class="checkbox-item"><checkbox value="offline"></checkbox>线下授课</label></checkbox-group></view><view class="form-item"><text class="label">可授课时间：</text><textarea class="normal-input" placeholder="请填写您的可授课时间，如：周一至周五晚上、周末全天等" data-event-opts="{{[['input',[['__set_model',['$0','availableTime','$event',[]],['formData']]]]]}}" value="{{formData.availableTime}}" bindinput="__e"></textarea></view><view class="form-item"><text class="label">技能标签：</text><view class="tag-list"><block wx:for="{{formData.tags}}" wx:for-item="tag" wx:for-index="index" wx:key="index"><view class="tag">{{''+tag+''}}<text data-event-opts="{{[['tap',[['deleteTag',[index]]]]]}}" class="delete-tag" bindtap="__e">×</text></view></block><input class="tag-input" placeholder="添加标签" data-event-opts="{{[['confirm',[['addTag',['$event']]]],['input',[['__set_model',['','newTag','$event',[]]]]]]}}" value="{{newTag}}" bindconfirm="__e" bindinput="__e"/></view></view></block></block><block wx:else><block wx:if="{{currentCategory===1}}"><block><view class="form-item"><text class="label">价格：</text><view class="price-input"><text>¥</text><input type="digit" placeholder="请输入价格" data-event-opts="{{[['input',[['__set_model',['$0','price','$event',[]],['formData']]]]]}}" value="{{formData.price}}" bindinput="__e"/><text class="unit">元</text></view></view><view class="form-item"><text class="label">交易类型：</text><view class="type-options"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['type-item',(formData.tradeType==='sell')?'active':'']}}" bindtap="__e">出售</view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="{{['type-item',(formData.tradeType==='buy')?'active':'']}}" bindtap="__e">求购</view></view></view></block></block><block wx:else><block wx:if="{{currentCategory===5}}"><block><view class="form-item"><text class="label">活动类型：</text><input class="normal-input" placeholder="请输入活动类型，如：爬山、骑行等" data-event-opts="{{[['input',[['__set_model',['$0','type','$event',[]],['formData']]]]]}}" value="{{formData.type}}" bindinput="__e"/></view><view class="form-item"><text class="label">活动时间：</text><input class="normal-input" placeholder="请输入活动时间，如：周末、周六下午等" data-event-opts="{{[['input',[['__set_model',['$0','time','$event',[]],['formData']]]]]}}" value="{{formData.time}}" bindinput="__e"/></view><view class="form-item"><text class="label">活动地点：</text><input class="normal-input" placeholder="请输入活动地点" data-event-opts="{{[['input',[['__set_model',['$0','location','$event',[]],['formData']]]]]}}" value="{{formData.location}}" bindinput="__e"/></view></block></block><block wx:else><block><block wx:if="{{currentCategory===2||currentCategory===3}}"><view class="form-item"><text class="label">价格：</text><view class="price-input"><text>¥</text><input type="digit" placeholder="请输入价格" data-event-opts="{{[['input',[['__set_model',['$0','price','$event',[]],['formData']]]]]}}" value="{{formData.price}}" bindinput="__e"/><text class="unit">元</text></view></view></block></block></block></block></block></block></block></view><view class="bottom-bar" style="{{'padding-bottom:'+(safeAreaBottom+'px')+';'}}"><button class="{{['submit-btn',(canSubmit)?'active':'']}}" disabled="{{!canSubmit||isSubmitting}}" data-event-opts="{{[['tap',[['submitForm',['$event']]]]]}}" bindtap="__e">{{''+(isSubmitting?'发布中...':'发布')+''}}</button></view></view>