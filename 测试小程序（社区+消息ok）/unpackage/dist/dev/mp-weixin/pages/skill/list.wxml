<view class="container"><view class="header"><view class="search-wrapper"><view class="search-bar"><view class="location-mini"><image class="location-icon" src="/static/images/local.png" mode="aspectFit"></image><text>{{currentSchool||'请认证'}}</text></view><view class="search-input"><uni-icons vue-id="79a30ed1-1" type="search" size="16" color="#666" bind:__l="__l"></uni-icons><input type="text" placeholder="搜索技能名称、类型等" data-event-opts="{{[['confirm',[['onSearch',['$event']]]],['input',[['__set_model',['','searchKeyword','$event',[]]]]]]}}" value="{{searchKeyword}}" bindconfirm="__e" bindinput="__e"/></view></view></view></view><scroll-view class="category-scroll" scroll-x="{{true}}" show-scrollbar="false"><view class="category-list"><block wx:for="{{tabs}}" wx:for-item="tab" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['switchTab',[index]]]]]}}" class="{{['category-item',activeTab===index?'active':'']}}" bindtap="__e"><text>{{tab.name}}</text></view></block></view></scroll-view><scroll-view class="skill-list" scroll-y="{{true}}" refresher-enabled="{{true}}" refresher-triggered="{{refreshing}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]],['refresherrefresh',[['onRefresh',['$event']]]]]}}" bindscrolltolower="__e" bindrefresherrefresh="__e"><block wx:if="{{$root.g0===0}}"><view class="empty-state"><image src="/static/images/empty.png" mode="aspectFit"></image><text>{{emptyText}}</text></view></block><block wx:else><view class="waterfall"><view class="waterfall-left"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="_id"><view data-event-opts="{{[['tap',[['navigateToDetail',['$0'],[[['leftList','_id',item.$orig._id,'_id']]]]]]]}}" class="skill-card" bindtap="__e"><image class="skill-image" src="{{item.$orig.images[0]||'/static/images/content/default.jpg'}}" mode="widthFix"></image><view class="skill-content"><view class="skill-header"><text class="title">{{item.$orig.title}}</text><text class="level">{{item.$orig.level||'暂无等级'}}</text></view><text class="desc">{{item.$orig.content}}</text><block wx:if="{{item.g1}}"><view class="tags"><block wx:for="{{item.$orig.tags}}" wx:for-item="tag" wx:for-index="index" wx:key="index"><text class="tag">{{tag}}</text></block></view></block><view class="skill-footer"><view class="user-info"><image class="avatar" src="{{item.$orig.userInfo.avatar||'/static/images/avatar/default.png'}}" mode="aspectFill"></image><text class="nickname">{{item.$orig.userInfo.nickname||'未知用户'}}</text></view><view class="price-row"><text class="price">{{"¥"+item.$orig.price}}</text><view class="button-group"><button data-event-opts="{{[['tap',[['startChat',['$0'],[[['leftList','_id',item.$orig._id]]]]]]]}}" class="action-btn chat-btn" catchtap="__e">私聊</button><button data-event-opts="{{[['tap',[['acceptOrder',['$0'],[[['leftList','_id',item.$orig._id]]]]]]]}}" class="action-btn accept-btn" catchtap="__e">接单</button></view></view></view></view></view></block></view><view class="waterfall-right"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="__i1__" wx:key="_id"><view data-event-opts="{{[['tap',[['navigateToDetail',['$0'],[[['rightList','_id',item.$orig._id,'_id']]]]]]]}}" class="skill-card" bindtap="__e"><image class="skill-image" src="{{item.$orig.images[0]||'/static/images/content/default.jpg'}}" mode="widthFix"></image><view class="skill-content"><view class="skill-header"><text class="title">{{item.$orig.title}}</text><text class="level">{{item.$orig.level||'暂无等级'}}</text></view><text class="desc">{{item.$orig.content}}</text><block wx:if="{{item.g2}}"><view class="tags"><block wx:for="{{item.$orig.tags}}" wx:for-item="tag" wx:for-index="index" wx:key="index"><text class="tag">{{tag}}</text></block></view></block><view class="skill-footer"><view class="user-info"><image class="avatar" src="{{item.$orig.userInfo.avatar||'/static/images/avatar/default.png'}}" mode="aspectFill"></image><text class="nickname">{{item.$orig.userInfo.nickname||'未知用户'}}</text></view><view class="price-row"><text class="price">{{"¥"+item.$orig.price}}</text><view class="button-group"><button data-event-opts="{{[['tap',[['startChat',['$0'],[[['rightList','_id',item.$orig._id]]]]]]]}}" class="action-btn chat-btn" catchtap="__e">私聊</button><button data-event-opts="{{[['tap',[['acceptOrder',['$0'],[[['rightList','_id',item.$orig._id]]]]]]]}}" class="action-btn accept-btn" catchtap="__e">接单</button></view></view></view></view></view></block></view></view></block><block wx:if="{{$root.g3>0}}"><view class="loading-state"><block wx:if="{{loading}}"><text>加载中...</text></block><block wx:else><block wx:if="{{pagination.page>=pagination.totalPage}}"><text>没有更多了</text></block><block wx:else><text>上拉加载更多</text></block></block></view></block></scroll-view></view>