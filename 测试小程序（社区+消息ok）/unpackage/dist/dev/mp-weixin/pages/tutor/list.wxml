<view class="container"><view class="header"><view class="location-bar"><image class="location-icon" src="/static/images/local.png" mode="aspectFit"></image><text class="location-text">{{currentSchool||'请认证'}}</text><input class="search-input" type="text" placeholder="搜索课程辅导" data-event-opts="{{[['confirm',[['onSearch',['$event']]]],['input',[['__set_model',['','searchKeyword','$event',[]]]]]]}}" value="{{searchKeyword}}" bindconfirm="__e" bindinput="__e"/></view></view><view class="category-tabs"><block wx:for="{{filters}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['switchFilter',['$0'],[[['filters','',index,'value']]]]]]]}}" class="{{['tab-item',(currentFilter===item.value)?'active':'']}}" bindtap="__e">{{''+item.name+''}}</view></block></view><scroll-view class="content-list" scroll-y="{{true}}" refresher-enabled="{{true}}" refresher-triggered="{{refreshing}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]],['refresherrefresh',[['onRefresh',['$event']]]]]}}" bindscrolltolower="__e" bindrefresherrefresh="__e"><block wx:if="{{$root.g0===0}}"><view class="empty-state"><image class="empty-image" src="/static/images/empty.png" mode="aspectFit"></image><text class="empty-text">{{emptyText}}</text></view></block><block wx:else><view class="waterfall"><view class="waterfall-left"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="_id"><view data-event-opts="{{[['tap',[['navigateToDetail',['$0'],[[['leftList','_id',item.$orig._id,'_id']]]]]]]}}" class="card" bindtap="__e"><block wx:if="{{item.g1}}"><image class="card-image" src="{{item.$orig.images[0]}}" mode="widthFix"></image></block><view class="card-content"><text class="title">{{item.$orig.title}}</text><text class="desc">{{item.$orig.content}}</text><block wx:if="{{item.$orig.price}}"><text class="price">{{"¥"+item.$orig.price+"/小时"}}</text></block><view class="user-info"><image class="avatar" src="{{item.$orig.userInfo.avatar||'/static/images/avatar/default.png'}}" mode="aspectFill"></image><text class="nickname">{{item.$orig.userInfo.nickname}}</text></view><view class="action-btns"><button data-event-opts="{{[['tap',[['chatWithUser',['$0'],[[['leftList','_id',item.$orig._id]]]]]]]}}" class="btn chat" catchtap="__e">私聊</button><button data-event-opts="{{[['tap',[['bookTutor',['$0'],[[['leftList','_id',item.$orig._id]]]]]]]}}" class="btn book" catchtap="__e">预约</button></view></view></view></block></view><view class="waterfall-right"><block wx:for="{{rightList}}" wx:for-item="item" wx:for-index="__i1__" wx:key="_id"><view data-event-opts="{{[['tap',[['navigateToDetail',['$0'],[[['rightList','_id',item._id,'_id']]]]]]]}}" class="card" bindtap="__e"><view class="card-content"><text class="title">{{item.title}}</text><text class="desc">{{item.content}}</text><block wx:if="{{item.price}}"><text class="price">{{"¥"+item.price+"/小时"}}</text></block><view class="user-info"><image class="avatar" src="{{item.userInfo.avatar||'/static/images/avatar/default.png'}}" mode="aspectFill"></image><text class="nickname">{{item.userInfo.nickname}}</text></view><view class="action-btns"><button data-event-opts="{{[['tap',[['chatWithUser',['$0'],[[['rightList','_id',item._id]]]]]]]}}" class="btn chat" catchtap="__e">私聊</button><button data-event-opts="{{[['tap',[['bookTutor',['$0'],[[['rightList','_id',item._id]]]]]]]}}" class="btn book" catchtap="__e">预约</button></view></view></view></block></view></view></block><block wx:if="{{$root.g2>0}}"><view class="loading-state"><block wx:if="{{loading}}"><text>加载中...</text></block><block wx:else><block wx:if="{{pagination.page>=pagination.totalPage}}"><text>没有更多了</text></block><block wx:else><text>上拉加载更多</text></block></block></view></block></scroll-view></view>